#include "CameraScreen.h"

CameraScreen::CameraScreen(QWidget *parent) : QWidget(parent)
{
    label = new QLabel("camera frame", this);
    label->setGeometry(0, 0, WIDTH, HEIGHT);

    QTimer *timer = new QTimer(this);
    connect(timer, &QTimer::timeout, this, QOverload<>::of(&CameraScreen::update));
    timer->start((int)(1000/FRAMES_PER_SEC));

    setWindowFlags( Qt::Window | Qt::FramelessWindowHint);
    resize(WIDTH, HEIGHT);
}

void CameraScreen::paintEvent(QPaintEvent *)
{
    label->setPixmap(QPixmap::fromImage(newFrame()));
}

QImage CameraScreen::newFrame()
{
    QImage image(WIDTH, HEIGHT, QImage::Format_RGB32);
    QRgb value = qRgb(255, 0, 0);

    image.setPixel(1, 1, value);
    image.setPixel(0, 1, value);
    image.setPixel(1, 0, value);
    image.setPixel(2, 1, value);



    return image;
}
